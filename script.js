"use strict";!function(){function e(e,t,n){e.addEventListener("click",function(){l!==t&&(l+=n,a.style.transform="translateX(".concat(l,"%)"))})}var t,n,o,a,l;t="advantagesLeftBtn",n="advantagesRightBtn",o="advantagesList",t=document.getElementById(t),n=document.getElementById(n),a=document.getElementById(o),e(t,l=0,100),e(n,-100*(a.childElementCount-1),-100)}(),function(){var t=document.getElementById("form"),e=document.getElementById("submit");document.getElementById("tel");function n(e){return""!==e.trim()}function o(e){e.previousElementSibling.lastElementChild.textContent="Ошибка в заполнении"}function a(e){e.previousElementSibling.lastElementChild.textContent=""}e.addEventListener("click",function(e){e.preventDefault(),function(e){var t=!0;(n(e.elements.name.value)?a:(t=!1,o))(e.elements.name);(!function(e){return/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)}(e.elements.email.value)?(t=!1,o):a)(e.elements.email);(!function(e){return/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/.test(e)}(e.elements.tel.value)?(t=!1,o):a)(e.elements.tel);(n(e.elements.message.value)?a:(t=!1,o))(e.elements.message);return t}(t)&&alert("OK!")})}(),function(){var t=document.querySelector(".hamburger"),n=document.querySelector(".wrapper"),o=document.querySelector(".overlay"),a=document.getElementsByClassName("overlay__menu-link"),l=!1;t.addEventListener("click",function(){t.classList.toggle("hamburger--active"),o.classList.toggle("overlay--active"),(l=!l)?(n.style.height="100vh",n.style.overflow="hidden"):(n.style.height=null,n.style.overflow=null);for(var e=0;e<a.length;e++)a[e].addEventListener("click",function(){n.style.height=null,n.style.overflow=null,t.classList.remove("hamburger--active"),o.classList.remove("overlay--active"),l=!1})})}(),function(){var o;ymaps.ready(function(){o=new ymaps.Map("map",{center:[55.835502,37.509817],zoom:13,l:"sat"});for(var e=[[55.836701,37.510107]],t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"../img/marker.svg",iconImageSize:[46,57],iconImageOffset:[-35,-52]}),n=0;n<e.length;n++)t.add(new ymaps.Placemark(e[n]));o.geoObjects.add(t)})}(),function(){var e=window.outerWidth;document.body.parentElement.style.fontSize="".concat(820<e?e/85.333:e/66.67,"px")}(),function(){var e=document.querySelector(".form"),t=document.getElementsByClassName("form__input"),n=document.getElementsByClassName("form__group"),o=document.querySelector(".form__textarea");var a=window.outerWidth,l=window.outerHeight;820<a?(e.style.width="".concat(.7*a,"px"),e.style.height="".concat(.7*l,"px")):(e.style.width="".concat(a,"px"),e.style.height="".concat(.9*l,"px"));for(var r=0;r<t.length;r++)t[r].style.height="".concat(.05*l,"px");for(var i=0;i<n.length;i++)for(var c=n[i].children,s=0;s<c.length;s++)c[s].style.width="".concat(7*a/c.length,"px");o.parentNode.style.width="100%",o.style.height="".concat(820<a?.2*l:420<a?.55*l:.5*l,"px")}(),function(){var e,t;e=document.querySelector(".intro__content"),t=window.outerWidth,e.style.width="".concat(t/2.276,"px")}(),function(){var r=document.getElementsByClassName("advantages__item"),i=document.getElementsByClassName("catalog__item");function c(e,t,n,o){var a=window.innerHeight,l=window.innerWidth,t=a*t,a=a/o;e.style.width="".concat(l*n,"px"),e.style.height="".concat(t,"px"),e.style.fontSize="".concat(a,"px")}for(var e,t=["load","resize"],n=0;n<t.length;n++)e=t[n],window.addEventListener(e,function(){if(820<window.outerWidth){for(var e=0;e<r.length;e++)c(r[e],.55,.2,30);for(var t=0;t<i.length;t++)c(i[t],.4,.28,30)}else if(420<window.outerWidth){for(var n=0;n<r.length;n++)c(r[n],.45,.4,40);for(var o=0;o<i.length;o++)c(i[o],.27,.45,65)}else{for(var a=0;a<r.length;a++)c(r[a],.33,.46,22.7);for(var l=0;l<i.length;l++)c(i[l],.27,.45,65)}})}(),function(){var e=document.querySelector(".overlay__menu"),t=window.outerWidth;e.style.fontSize="".concat(t/15,"px")}(),window.addEventListener("load",function(){document.body.parentElement.classList.add("loaded")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkdmFudGFnZXNTbGlkZXIuanMiLCJmb3JtLmpzIiwiaGFtYnVyZ2VyLmpzIiwibWFwLmpzIiwic2V0RG9jdW1lbnRGb250U2l6ZS5qcyIsInNldEZvcm1TaXplcy5qcyIsInNldEludHJvQ29udGVudFNpemUuanMiLCJzZXRMaXN0SXRlbVNpemUuanMiLCJzZXRPdmVybGF5Rm9udC5qcyIsIndpbmRvd0xvYWQuanMiXSwibmFtZXMiOlsiYnRuQWN0aXZpdHkiLCJidG4iLCJ3b3JrQ29uZGl0aW9uIiwiYWN0aXZpdHlWYWwiLCJhZGRFdmVudExpc3RlbmVyIiwidHJhbnNsYXRlVmFsIiwic2xpZGVyTGlzdCIsInN0eWxlIiwidHJhbnNmb3JtIiwiY29uY2F0IiwibGVmdEJ1dHRvbiIsInJpZ2h0QnV0dG9uIiwibGlzdCIsImxlZnRCdG4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwicmlnaHRCdG4iLCJjaGlsZEVsZW1lbnRDb3VudCIsImZvcm0iLCJzdWJtaXQiLCJ2YWxpZGF0ZVRleHQiLCJuYW1lIiwidHJpbSIsImVycm9yV2FybmluZyIsImVsZW1lbnQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwibGFzdEVsZW1lbnRDaGlsZCIsInRleHRDb250ZW50IiwiZXJyb3JSZXNldCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInZhbGlkIiwiZWxlbWVudHMiLCJ2YWx1ZSIsInZhbGlkYXRlRW1haWwiLCJlbWFpbCIsInRlc3QiLCJ2YWxpZGF0ZVRlbCIsInBob25lIiwidGVsIiwibWVzc2FnZSIsImFsZXJ0IiwiaGFtYnVyZ2VyIiwicXVlcnlTZWxlY3RvciIsIndyYXBwZXIiLCJvdmVybGF5IiwibGlua3MiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaXNBY3RpdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJoZWlnaHQiLCJvdmVyZmxvdyIsImkiLCJsZW5ndGgiLCJyZW1vdmUiLCJteU1hcCIsInltYXBzIiwicmVhZHkiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwibCIsImNvb3JkcyIsIm15Q29sbGVjdGlvbiIsIkdlb09iamVjdENvbGxlY3Rpb24iLCJkcmFnZ2FibGUiLCJpY29uTGF5b3V0IiwiaWNvbkltYWdlSHJlZiIsImljb25JbWFnZVNpemUiLCJpY29uSW1hZ2VPZmZzZXQiLCJhZGQiLCJQbGFjZW1hcmsiLCJnZW9PYmplY3RzIiwid2lkdGgiLCJ3aW5kb3ciLCJvdXRlcldpZHRoIiwiYm9keSIsInBhcmVudEVsZW1lbnQiLCJmb250U2l6ZSIsImZvcm1JbnB1dCIsImZvcm1Hcm91cCIsImZvcm1UZXh0YXJlYSIsIm91dGVySGVpZ2h0IiwiZm9ybUJsb2NrIiwiY2hpbGRyZW4iLCJqIiwicGFyZW50Tm9kZSIsImludHJvQ29udGVudCIsImFkdmFudGFnZXNJdGVtIiwiY2F0YWxvZ0l0ZW0iLCJzZXRMaXN0SXRlbVNpemUiLCJpdGVtIiwiaGVpZ2h0UHJvcCIsIndpZHRoUHJvcCIsImZvbnRQcm9wIiwiaW5uZXJIZWlnaHQiLCJpbm5lcldpZHRoIiwiaXRlbUhlaWdodCIsImZvbnRTeiIsImV2ZW50IiwiZXZlbnRzIiwib3ZlcmxheU1lbnUiXSwibWFwcGluZ3MiOiJhQUFBLENBQUEsV0FZQSxTQUFBQSxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBRixFQUFBRyxpQkFBQSxRQUFBLFdBQ0FDLElBQUFILElBQ0FHLEdBQUFGLEVBQ0FHLEVBQUFDLE1BQUFDLFVBQUEsY0FBQUMsT0FBQUosRUFBQSxJQUFBLEVBRUEsQ0FMQSxDQU1BLENBakJBLElBQUFLLEVBQUFDLEVBQUFDLEVBR0FOLEVBRUFELEVBTEFLLEVBcUJBLG9CQXJCQUMsRUFxQkEscUJBckJBQyxFQXFCQSxpQkFwQkFDLEVBQUFDLFNBQUFDLGVBQUFMLENBQUEsRUFDQU0sRUFBQUYsU0FBQUMsZUFBQUosQ0FBQSxFQUNBTCxFQUFBUSxTQUFBQyxlQUFBSCxDQUFBLEVBSUFaLEVBQUFhLEVBRkFSLEVBQUEsRUFFQSxHQUFBLEVBQ0FMLEVBQUFnQixFQUFBLENBQUEsS0FBQVYsRUFB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QXBDLEdBQUEsSUFBQSxHQUFBLEVBQUEsRUFHQSxJQUFBLElBQUFBLEVBQUEsRUFBQUEsRUFBQXFDLEVBQUFwQyxPQUFBRCxDQUFBLEdBQ0FzQyxFQUFBRCxFQUFBckMsR0FBQSxHQUFBLElBQUEsRUFBQSxDQUVBLE1BQUEsR0FBQSxJQUFBc0IsT0FBQUMsV0FBQSxDQUNBLElBQUEsSUFBQXZCLEVBQUEsRUFBQUEsRUFBQW9DLEVBQUFuQyxPQUFBRCxDQUFBLEdBQ0FzQyxFQUFBRixFQUFBcEMsR0FBQSxJQUFBLEdBQUEsRUFBQSxFQUdBLElBQUEsSUFBQUEsRUFBQSxFQUFBQSxFQUFBcUMsRUFBQXBDLE9BQUFELENBQUEsR0FDQXNDLEVBQUFELEVBQUFyQyxHQUFBLElBQUEsSUFBQSxFQUFBLENBRUEsS0FBQSxDQUNBLElBQUEsSUFBQUEsRUFBQSxFQUFBQSxFQUFBb0MsRUFBQW5DLE9BQUFELENBQUEsR0FDQXNDLEVBQUFGLEVBQUFwQyxHQUFBLElBQUEsSUFBQSxJQUFBLEVBR0EsSUFBQSxJQUFBQSxFQUFBLEVBQUFBLEVBQUFxQyxFQUFBcEMsT0FBQUQsQ0FBQSxHQUNBc0MsRUFBQUQsRUFBQXJDLEdBQUEsSUFBQSxJQUFBLEVBQUEsQ0FFQSxDQUNBLENBM0JBLENBckJBLEVBQUEsRUNBQSxXQUVBLElBQUFpRCxFQUFBeEYsU0FBQTZCLGNBQUEsZ0JBQUEsRUFDQStCLEVBQUFDLE9BQUFDLFdBRUEwQixFQUFBL0YsTUFBQXdFLFNBQUEsR0FBQXRFLE9BQUFpRSxFQUFBLEdBQUEsSUFBQSxDQUxBLEVBQUEsRUNBQUMsT0FBQXZFLGlCQUFBLE9BQUEsV0FDQVUsU0FBQStELEtBQUFDLGNBQUE3QixVQUFBc0IsSUFBQSxRQUFBLENBQ0EsQ0FGQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KFxyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIHNsaWRlciAobGVmdEJ1dHRvbiwgcmlnaHRCdXR0b24sIGxpc3QpIHtcclxuICAgICAgICAgICAgY29uc3QgbGVmdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxlZnRCdXR0b24pO1xyXG4gICAgICAgICAgICBjb25zdCByaWdodEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHJpZ2h0QnV0dG9uKTtcclxuICAgICAgICAgICAgY29uc3Qgc2xpZGVyTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3QpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlVmFsID0gMDtcclxuICAgICAgICBcclxuICAgICAgICAgICAgYnRuQWN0aXZpdHkobGVmdEJ0biwgMCwgMTAwKTtcclxuICAgICAgICAgICAgYnRuQWN0aXZpdHkocmlnaHRCdG4sICgoc2xpZGVyTGlzdC5jaGlsZEVsZW1lbnRDb3VudCAtIDEpICogLTEwMCksIC0xMDApO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBidG5BY3Rpdml0eShidG4sIHdvcmtDb25kaXRpb24sIGFjdGl2aXR5VmFsKSB7XHJcbiAgICAgICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zbGF0ZVZhbCAhPT0gd29ya0NvbmRpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVWYWwgPSB0cmFuc2xhdGVWYWwgKyBhY3Rpdml0eVZhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyTGlzdC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke3RyYW5zbGF0ZVZhbH0lKWA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2xpZGVyKCdhZHZhbnRhZ2VzTGVmdEJ0bicsICdhZHZhbnRhZ2VzUmlnaHRCdG4nLCAnYWR2YW50YWdlc0xpc3QnKTtcclxuICAgIH1cclxuKSgpIiwiOyhcclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0nKTtcclxuICAgICAgICBjb25zdCBzdWJtaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VibWl0Jyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZWwnKTtcclxuXHJcbiAgICAgICAgc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblxyXG4gICAgICAgICAgICBpZiAodmFsaWRhdGVGb3JtKGZvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnT0shJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0pIHtcclxuICAgICAgICAgICAgbGV0IHZhbGlkID0gdHJ1ZTtcclxuICBcclxuICAgICAgICAgICAgaWYgKCF2YWxpZGF0ZVRleHQoZm9ybS5lbGVtZW50cy5uYW1lLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGVycm9yV2FybmluZyhmb3JtLmVsZW1lbnRzLm5hbWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JSZXNldChmb3JtLmVsZW1lbnRzLm5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgICAgIGlmICghdmFsaWRhdGVFbWFpbChmb3JtLmVsZW1lbnRzLmVtYWlsLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGVycm9yV2FybmluZyhmb3JtLmVsZW1lbnRzLmVtYWlsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVycm9yUmVzZXQoZm9ybS5lbGVtZW50cy5lbWFpbCk7XHJcbiAgICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgICAgaWYgKCF2YWxpZGF0ZVRlbChmb3JtLmVsZW1lbnRzLnRlbC52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBlcnJvcldhcm5pbmcoZm9ybS5lbGVtZW50cy50ZWwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JSZXNldChmb3JtLmVsZW1lbnRzLnRlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgICAgaWYgKCF2YWxpZGF0ZVRleHQoZm9ybS5lbGVtZW50cy5tZXNzYWdlLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGVycm9yV2FybmluZyhmb3JtLmVsZW1lbnRzLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JSZXNldChmb3JtLmVsZW1lbnRzLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgICAgIHJldHVybiB2YWxpZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlVGV4dChuYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAobmFtZS50cmltKCkgIT09ICcnKTsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZUVtYWlsKGVtYWlsKSB7XHJcbiAgICAgICAgICAgIHZhciByZWcgPSAvXihbQS1aYS16MC05X1xcLVxcLl0pK1xcQChbQS1aYS16MC05X1xcLVxcLl0pK1xcLihbQS1aYS16XXsyLDR9KSQvO1xyXG4gICAgICAgICAgICB2YXIgYWRkcmVzcyA9IGVtYWlsO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlZy50ZXN0KGFkZHJlc3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZVRlbChwaG9uZSl7XHJcbiAgICAgICAgICAgIGxldCByZWdleCA9IC9eKFxcKzd8N3w4KT9bXFxzXFwtXT9cXCg/WzQ4OV1bMC05XXsyfVxcKT9bXFxzXFwtXT9bMC05XXszfVtcXHNcXC1dP1swLTldezJ9W1xcc1xcLV0/WzAtOV17Mn0kLztcclxuICAgICAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3QocGhvbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXJyb3JXYXJuaW5nIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkLnRleHRDb250ZW50ID0gJ9Ce0YjQuNCx0LrQsCDQsiDQt9Cw0L/QvtC70L3QtdC90LjQuCc7XHJcbiAgICAgICAgfSAgICAgXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGVycm9yUmVzZXQgKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmxhc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICB9ICAgICAgICBcclxuICAgIH1cclxuKSgpIiwiOyhcclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCBoYW1idXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGFtYnVyZ2VyJyk7XHJcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53cmFwcGVyJyk7XHJcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XHJcbiAgICAgICAgY29uc3QgbGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdvdmVybGF5X19tZW51LWxpbmsnKTtcclxuICAgICAgICBsZXQgaXNBY3RpdmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaGFtYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBoYW1idXJnZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGFtYnVyZ2VyLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKCdvdmVybGF5LS1hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgIGlzQWN0aXZlID0gIWlzQWN0aXZlID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmhlaWdodCA9ICcxMDB2aCc7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmhlaWdodCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnN0eWxlLm92ZXJmbG93ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5zdHlsZS5oZWlnaHQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuc3R5bGUub3ZlcmZsb3cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbWJ1cmdlci5jbGFzc0xpc3QucmVtb3ZlKCdoYW1idXJnZXItLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheS0tYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbikoKSIsIjsoXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IG15TWFwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIG15TWFwID0gbmV3IHltYXBzLk1hcChcIm1hcFwiLCB7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXI6IFs1NS44MzU1MDIsIDM3LjUwOTgxN10sXHJcbiAgICAgICAgICAgICAgICB6b29tOiAxMyxcclxuICAgICAgICAgICAgICAgIGw6ICdzYXQnXHJcbiAgICAgICAgICAgICAgICAvLyBjb250cm9sczogW11cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBjb29yZHMgPSBbXHJcbiAgICAgICAgICAgICAgICBbLyo1NS44MDAyNDY3OCwgMzcuNTc5MjQ3MzksKi9cclxuICAgICAgICAgICAgICAgIDU1LjgzNjcwMSwgMzcuNTEwMTA3XVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBteUNvbGxlY3Rpb24gPSBuZXcgeW1hcHMuR2VvT2JqZWN0Q29sbGVjdGlvbih7fSwge1xyXG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcclxuICAgICAgICAgICAgICAgIGljb25JbWFnZUhyZWY6ICcuLi9pbWcvbWFya2VyLnN2ZycsXHJcbiAgICAgICAgICAgICAgICBpY29uSW1hZ2VTaXplOiBbNDYsIDU3XSxcclxuICAgICAgICAgICAgICAgIGljb25JbWFnZU9mZnNldDogWy0zNSwgLTUyXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBteUNvbGxlY3Rpb24uYWRkKG5ldyB5bWFwcy5QbGFjZW1hcmsoY29vcmRzW2ldKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlDb2xsZWN0aW9uKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIHltYXBzLnJlYWR5KGluaXQpO1xyXG4gICAgfVxyXG4pKClcclxuIiwiOyhcclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IHdpbmRvdy5vdXRlcldpZHRoO1xyXG5cclxuICAgICAgICBpZiAod2lkdGggPiA4MjApIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50LnN0eWxlLmZvbnRTaXplID0gYCR7d2lkdGggLyA4NS4zMzN9cHhgO1xyXG4gICAgICAgIH0gZWxzZSAge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBgJHt3aWR0aCAvIDY2LjY3fXB4YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbikoKSIsIjsoXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgICAgICAgY29uc3QgZm9ybUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZm9ybV9faW5wdXQnKTtcclxuICAgICAgICBjb25zdCBmb3JtR3JvdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdmb3JtX19ncm91cCcpO1xyXG4gICAgICAgIGNvbnN0IGZvcm1UZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX190ZXh0YXJlYScpO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRGb3JtU2l6ZXMoKSB7XHJcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IHdpbmRvdy5vdXRlcldpZHRoO1xyXG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gd2luZG93Lm91dGVySGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpZHRoID4gODIwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtLnN0eWxlLndpZHRoID0gYCR7d2lkdGggKiAuN31weGA7XHJcbiAgICAgICAgICAgICAgICBmb3JtLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodCAqIC43fXB4YDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvcm0uc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XHJcbiAgICAgICAgICAgICAgICBmb3JtLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodCAqIC45fXB4YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtSW5wdXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvcm1JbnB1dFtpXS5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHQgKiAuMDV9cHhgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1Hcm91cC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZvcm1CbG9jayA9IGZvcm1Hcm91cFtpXS5jaGlsZHJlbjtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZvcm1CbG9jay5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1CbG9ja1tqXS5zdHlsZS53aWR0aCA9IGAkeyh3aWR0aCAqIDcpIC8gZm9ybUJsb2NrLmxlbmd0aH1weGA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcm1UZXh0YXJlYS5wYXJlbnROb2RlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpZHRoID4gODIwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtVGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0ICogLjJ9cHhgO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdpZHRoID4gNDIwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtVGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0ICogLjU1fXB4YDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvcm1UZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHQgKiAuNX1weGA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldEZvcm1TaXplcygpO1xyXG4gICAgfVxyXG4pKCkiLCI7KFxyXG4gICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIHNldEludHJvQ29udGVudFNpemUgKCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbnRyb0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW50cm9fX2NvbnRlbnQnKTsgXHJcbiAgICBcclxuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSB3aW5kb3cub3V0ZXJXaWR0aDtcclxuICAgIFxyXG4gICAgICAgICAgICBpbnRyb0NvbnRlbnQuc3R5bGUud2lkdGggPSBgJHt3aWR0aCAvIDIuMjc2fXB4YDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBzZXRJbnRyb0NvbnRlbnRTaXplKCk7XHJcbiAgICB9XHJcbikoKSIsIjsoXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc3QgYWR2YW50YWdlc0l0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhZHZhbnRhZ2VzX19pdGVtJyk7XHJcbiAgICAgICAgY29uc3QgY2F0YWxvZ0l0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjYXRhbG9nX19pdGVtJyk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldExpc3RJdGVtU2l6ZSAoaXRlbSwgaGVpZ2h0UHJvcCwgd2lkdGhQcm9wLCBmb250UHJvcCkge1xyXG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcblxyXG5cclxuICAgICAgICAgICAgbGV0IGl0ZW1IZWlnaHQgPSBoZWlnaHQgKiBoZWlnaHRQcm9wO1xyXG4gICAgICAgICAgICBsZXQgaXRlbVdpZHRoID0gd2lkdGggKiB3aWR0aFByb3A7XHJcbiAgICAgICAgICAgIGxldCBmb250U3ogPSBoZWlnaHQgLyBmb250UHJvcDtcclxuXHJcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUud2lkdGggPSBgJHtpdGVtV2lkdGh9cHhgO1xyXG4gICAgICAgICAgICBpdGVtLnN0eWxlLmhlaWdodCA9IGAke2l0ZW1IZWlnaHR9cHhgO1xyXG4gICAgICAgICAgICBpdGVtLnN0eWxlLmZvbnRTaXplID0gYCR7Zm9udFN6fXB4YDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiB3aW5kb3dFdmVudExpc3RlbmVyIChldmVudCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cub3V0ZXJXaWR0aCA+IDgyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWR2YW50YWdlc0l0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGlzdEl0ZW1TaXplKGFkdmFudGFnZXNJdGVtW2ldLCAuNTUsIC4yLCAzMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXRhbG9nSXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMaXN0SXRlbVNpemUoY2F0YWxvZ0l0ZW1baV0sIC40LCAuMjgsIDMwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5vdXRlcldpZHRoID4gNDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZHZhbnRhZ2VzSXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMaXN0SXRlbVNpemUoYWR2YW50YWdlc0l0ZW1baV0sIC40NSwgLjQsIDQwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2F0YWxvZ0l0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGlzdEl0ZW1TaXplKGNhdGFsb2dJdGVtW2ldLCAuMjcsIC40NSwgNjUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZHZhbnRhZ2VzSXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMaXN0SXRlbVNpemUoYWR2YW50YWdlc0l0ZW1baV0sIC4zMywgLjQ2LCAyMi43KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2F0YWxvZ0l0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGlzdEl0ZW1TaXplKGNhdGFsb2dJdGVtW2ldLCAuMjcsIC40NSwgNjUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBldmVudHMgPSBbJ2xvYWQnLCAncmVzaXplJ107XHJcblxyXG4gICAgICAgIC8vIGV2ZW50cy5mb3JFYWNoKGV2ZW50ID0+IHtcclxuICAgICAgICAvLyAgICAgd2luZG93RXZlbnRMaXN0ZW5lcihldmVudCk7XHJcbiAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgd2luZG93RXZlbnRMaXN0ZW5lcihldmVudHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuKSgpIiwiOyhcclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCBvdmVybGF5TWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5X19tZW51Jyk7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggPSB3aW5kb3cub3V0ZXJXaWR0aDtcclxuXHJcbiAgICAgICAgb3ZlcmxheU1lbnUuc3R5bGUuZm9udFNpemUgPSBgJHt3aWR0aCAvIDE1fXB4YDtcclxuICAgIH1cclxuKSgpIiwid2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbG9hZGVkJyk7XHJcbn0pOyJdfQ==
